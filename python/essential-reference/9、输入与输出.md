# 9.1 Reading Command-Line Options

When Python starts, command-line options are placed in the list `sys.argv`.The first element is the name of the program.

```python
import sys
if len(sys.argv) != 3:
    sys.stderr.write("Usage : python %s inputfile outputfile\n" % sys.argv[0])
    raise SystemExit(1)
inputfile = sys.argv[1]
outputfile = sys.argv[2]
```

Raising `SystemExit` with a non-zero exit code is standard practice for reporting usage errors in command-line tools.

Use theUoptparse module for more complicated command-line handling.

```python
import optparse
p = optparse.OptionParser()
# An option taking an argument
p.add_option("-o",action="store",dest="outfile")
p.add_option("--output",action="store",dest="outfile")
# An option that sets a boolean flag
p.add_option("-d",action="store_true",dest="debug")
p.add_option("--debug",action="store_true",dest="debug")
# Set default values for selected options
p.set_defaults(debug=False)
# Parse the command line
opts, args = p.parse_args()
# Retrieve the option settings
outfile = opts.outfile
debugmode = opts.debug
```

Parsing is performed using the `p.parse_args()` method.This method returns a 2-tuple `(opts, args)` where `opts` is an object containing the parsed option values and `args` is a list of items on the command line not parsed as options.


# 9.2 Environment Variables

Environment variables are accessed in the dictionary `os.environ`.

```python
import os
path = os.environ["PATH"]
user = os.environ["USER"]
editor = os.environ["EDITOR"]
```

To modify the environment variables, set the `os.environ` variable, `os.environ["FOO"] = "BAR"`.

Modifications to `os.environ` affect both the running program and subprocesses created by Python.


# 9.3 Files and File Objects

The built-in function `open(name, [, mode, [, bufsize]])` opens and creates a file object,

```python
f = open("foo") # Opens "foo" for reading
f = open("foo",'r') # Opens "foo" for reading (same as above)
f = open("foo",'w') # Open for writing
```

The file mode is 'r' for read, 'w' for write, or 'a' for append.These file modes assume text-mode and may implicitly perform translation of the newline character '\n'.

If you are working with binary data, append a 'b' to the file mode such as 'rb' or 'wb'.This disables newline translation and should be included if you are concerned about portability of code that processes binary data.

A file can be opened for in-place updates by supplying a plus (+) character, such as 'r+' or 'w+'.

If a file is opened with mode 'U' or 'rU', it provides universal newline support for reading.

The optional `bufsize` parameter controls the buffering behavior of the file, where 0 is unbuffered, 1 is line buffered, and a negative number requests the system default.Any other positive number indicates the approximate buffer size in bytes that will be used.

File Methods

| Method | Description |
| ------ | ----------- |
| f.read([n]) | Reads at most n bytes. |
| f.readline([n]) | Reads a single line of input up to n characters. If n is omitted, this method reads the entire line. |
| f.readlines([size]) | Reads all the lines and returns a list. size optionally specifies the approximate number of characters to read on the file before stopping. |
| f.write(s) | Writes string s. |
| f.writelines(lines) | Writes all strings in sequence lines. |
| f.close() | Closes the file. |
| f.tell() | Returns the current file pointer. |
| f.seek(offset [, whence]) | Seeks to a new file position. |
| f.isatty() | Returns 1 if f is an interactive terminal. |
| f.flush() | Flushes the output buffers. |
| f.truncate([size]) | Truncates the file to at most size bytes. |
| f.fileno() | Returns an integer file descriptor. |
| f.next() | Returns the next line or raises StopIteration. In Python 3, it is called `f.__next__()`. |

The `read()` method returns the entire file as a string unless an optional length parameter is given specifying the maximum number of characters.

Both the `readline()` and `readlines()` methods are platform-aware and handle different representations of newlines properly.

`read()` and `readline()` indicate end-of-file (EOF) by returning an empty string.

```python
while True:
    line = f.readline()
    if not line: # EOF
        break
```

A convenient way to read all lines in a file is to use iteration with a `for` loop,

```python
for line in f: # Iterate over all lines in the file
    # Do sth
```

In Python 2, the various read operations always return 8-bit strings, regardless of the file mode that was specified (text or binary). In Python 3, these operations return Unicode strings if a file has been opened in text mode and byte strings if the file is opened in binary mode.

File objects also have the read-only data attributes.

| Attribute | Description |
| --------- | ----------- |
| f.closed | Boolean value indicates the file state |
| f.mode | The I/O mode for the file |
| f.name | Name of the file if created using open(). Otherwise, it will be a string indicating the source of the file. |
| f.softspace | Boolean value indicating whether a space character needs to be printed before another value when using the print statement. |
| f.newlines | When a file is opened in universal newline mode, this attribute contains the newline representation actually found in the file. |
| f.encoding | A string that indicates file encoding |



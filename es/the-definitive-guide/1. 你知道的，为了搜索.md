Elasticsearch 是一个实时的分布式搜索分析引擎， 它能让你以一个之前从未有过的速度和规模，去探索你的数据。 它被用作全文检索、结构化搜索、分析以及这三个功能的组合。

Elasticsearch 中没有一个单独的组件是全新的或者是革命性的。全文搜索很久之前就已经可以做到了， 就像早就出现了的分析系统和分布式数据库。 革命性的成果在于将这些单独的，有用的组件融合到一个单一的、一致的、实时的应用中。

Elasticsearch 是使用 Java 编写的，它的内部使用 Lucene 做索引与搜索，但是它的目标是使全文检索变得简单， 通过隐藏 Lucene 的复杂性，取而代之的提供一套简单一致的 RESTful API。

在Lucene 基础上，Elasticsearch也是

- 一个分布式的实时文档存储，每个字段 可以被索引与搜索
- 一个分布式实时分析搜索引擎
- 能胜任上百个服务节点的扩展，并支持 PB 级别的结构化或者非结构化数据

# 安装并运行 Elasticsearch

安装 Elasticseach 之前必须安装一个较新的Java。

测试 Elasticsearch 是否启动成功可以执行：

```
curl 'http://localhost:9200/?pretty'
```

单个*节点*可以作为一个运行中的 Elasticsearch 的实例。 而一个*集群*是一组拥有相同 `cluster.name` 的节点， 他们能一起工作并共享数据，还提供容错与可伸缩性。

# 安装 Sense

Sense 是一个 Kibana 应用 它提供交互式的控制台，通过你的浏览器直接向 Elasticsearch 提交请求。

```
./bin/kibana plugin --install elastic/sense
```

# 和 Elasticsearch 交互

## Java API

Java 可以使用 Elasticsearch 的两个客户端：

- 节点客户端（Node Client）

  节点客户端作为一个非数据节点加入到本地集群中。换句话说，它本身不保存任何数据，但是它知道数据在集群中的哪个节点中，并且可以把请求转发到正确的节点。

- 传输客户端（Transport Client）

  轻量级的传输客户端可以可以将请求发送到远程集群。它本身不加入集群，但是它可以将请求转发到集群中的一个节点上。


两个 Java 客户端都是通过 *9300* 端口并使用本地 Elasticsearch *传输* 协议和集群交互。集群中的节点通过端口 9300 彼此通信。如果这个端口没有打开，节点将无法形成一个集群。

> Java 客户端作为节点必须和 Elasticsearch 有相同的 *主要* 版本；否则，它们之前将无法互相理解。

## Restful API

所有其他语言可以使用 RESTful API 通过端口 *9200* 和 Elasticsearch 进行通信。

```shell
curl -X<VERB> '<PROTOCOL>://<HOST>:<PORT>/<PATH>?<QUERY_STRING>' -d '<BODY>'
```

# 面向文档


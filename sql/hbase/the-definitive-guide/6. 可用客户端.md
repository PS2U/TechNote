# 6.1 REST、Thrift 和 Avro 的介绍

HBase 提供了 REST、Thrift、Avro的辅助服务，它们可以被实现为专门的网关服务。这些服务使用基于 `HTable`的客户端API来访问表。

REST 支持现有的基于Web的体系，能够完美融合反向代理和其他缓存技术。

Thrift/Avro从吞吐量的角度出发，使用严谨的二进制协议。用户可以运行较少的服务。

# 6.2 交互客户端

## 6.2.1 原生 Java

用户直接使用 `HTable`并通过原生的RPC调用与HBase服务器交互，不需要开启网关服务。

## 6.2.2 REST

基于 REST 的客户端能够与 HBase 通信之前要先启动REST网关服务。

```shell
bin/hbase rest start

// 或者
bin/hbase-daemon.sh start rest
```

```shell
// 用户可以指定以文本方式返回数据
curl -H "Accept: text/plain" http://<servername>:8080/version

// 默认的存储和查询格式是XML，列与值都经过了Base64编码
curl http://<servername>:8080/testtable/%01%02%03/colfam1:col1

// JSON
curl -H "Accept: application/json" http://<servername>:8080/testtable/%01%02%03/colfam1:col1

// Protocal Buffer
curl -H "Accept: application/x-protobuf" http://<servername>:8080/testtable/%01%02%03/colfam1:col1 | hexdump -c

// Raw Binary
curl -H "Accept: application/octet-stream" http://<servername>:8080/testtable/%01%02%03/colfam1:col1 | hexdump -c
```

REST 的 Java 客户端，位于`org.apach.hbase.rest.client`包中。其核心类：`RemoteHTable`和`RemoteAdmin`。

## 6.2.3 Thrift

Apache Thrift 是由C++编写的框架，也提供了跨语言的schema定义文件。一旦定义了schema，就可以在异构系统中跨语言通信。

```shell
// 确定 Thrift 服务器
bin/hbase thrift start
// 或者
bin/hbase-daemon.sh start thrift
```

## 6.2.4 Avro

类似于Thrift，Avro也提供了多种编程语言的模式定义文件。

其他客户端：

- JRuby。HBase Shell是基于JVM语言访问Java API的最佳李子。
- HBql。在HBase基础上提供SQL语法访问。
- HBase-DSL。提供了特定的类，帮助格式化查询HBase集群。
- JPA/JPO。用户可以使用DataNuleus在HBase上封装一层JPA/JPO。
- PyHbase。提供了与Avro网关服务器通信的HBase客户端。
- AsyncHBase。提供完全异步、非阻塞、线程安全的客户端来访问HBase集群。



# 6.3 批处理客户端




# 导航

[目录](README.md)

上一章：[5. 客户端API：管理功能](5. 客户端API：管理功能.md)

下一章：
